// The Vue build version to load with the `import` command
// (runtime-only or standalone) has been set in webpack.base.conf with an alias.
import Vue from 'vue'
import App from './App'
import router from './router'
import './config/rem'

Vue.config.productionTip = false
/* eslint-disable no-new */
new Vue({
  el: '#app',
  router,
  template: '<App/>',
  components: { App },
  created:function(){
  	this.alert();
  	this.setTitle();
  	//this.isWeixin();
  },
  methods:{
  	alert:function(){
  		var init = function(){
  			var iframe = document.createElement('IFRAME');
  			iframe.style.display = 'none';
  			iframe.setAttribute('src','data:text/plain, ');
  			document.documentElement.appendChild(iframe);
  			return iframe;
  		}
  		window.alert = function(name){
  			var iframe = init();
  			window.frames[0].window.alert(name);
  			iframe.parentNode.removeChild(iframe);
  		}
  		window.confirm = function(msg){
  			var iframe = init();
  			var result = window.frames[0].window.confirm(msg);
  			iframe.parentNode.removeChild(iframe);
  			return result;
  		}
  	},
  	setTitle:function(){
  		window.setTitle = function(t){
	  		document.title = t;
	  		var i = document.createElement('iframe');
	  		i.src = 'http://m.baidu.com/favicon.ico';
	  		i.style.display = 'none';
	  		i.onload = function(){
	  			setTimeout(function(){
	  				i.remove();
	  			},9)
	  		}
	  		document.body.appendChild(i);
	  	}
  	},
  	isWeixin:function(){
  		var ua = window.navigator.userAgent.toLowerCase();
	    if(ua.match(/MicroMessenger/i) == 'micromessenger'){ 
	     return true;
	    }else{
	    	document.body.innerHTML='<h4 style="text-align:center;color:#fff;font-weight:100;margin-top:40px;">请使用微信浏览器打开</h4>';
	     	console.log('is no weixin');
	      return false;
	    }
  	}
  }
})
